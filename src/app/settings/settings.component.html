<div class="card !pt-5">
  <p-table
    [columns]="cols"
    [value]="courses()"
    [tableStyle]="{ 'min-width': '50rem' }"
    [paginator]="true"
    [rows]="10"
    [rowsPerPageOptions]="[5, 10, 20]"
  >
    <ng-template pTemplate="header" let-columns>
      <tr>
        <th *ngFor="let col of columns">{{ col.header }}</th>
        <th colspan="3">Actions</th>
      </tr>
    </ng-template>

    <ng-template pTemplate="body" let-rowData let-columns="columns">
      <tr>
        <td *ngFor="let col of columns">{{ rowData[col.field] }}</td>
        <td><p-button label="Invite" (click)="showCourse(rowData)"></p-button></td>
        <td><p-button label="Edit" (click)="openEditModal(rowData)"></p-button></td>
        <td><p-button label="Delete" severity="danger" (click)="openDeleteModal(rowData)"></p-button></td>
      </tr>
    </ng-template>
  </p-table>
</div>

<div class="flex gap-2 mt-4 justify-center !mt-2">
  <p-button label="Add Course" icon="pi pi-plus" (click)="openAddModal()"></p-button>
</div>

<!-- ADD COURSE MODAL -->
<p-dialog header="Kurs hinzufügen" [modal]="true" [(visible)]="addModalVisible" [style]="{ width: '30rem' }" [closable]="false">
  <div class="p-fluid">
    <div class="p-field !pb-3">
      <label for="courseID" class="!pr-5">Kurs ID</label>
      <input id="courseID" type="text" pInputText [(ngModel)]="newCourse.courseID" />
    </div>
    <div class="p-field !pb-5">
      <label for="name" class="!pr-5">Name</label>
      <input id="name" type="text" pInputText [(ngModel)]="newCourse.name" />
    </div>
  </div>
  <div class="flex justify-end gap-2 mt-4">
    <p-button label="Abbrechen" class="p-button-text" (click)="addModalVisible = false"></p-button>
    <p-button label="Kurs hinzufügen" severity="danger" (click)="addCourse()"></p-button>
  </div>
</p-dialog>

<!-- EDIT COURSE MODAL -->
<p-dialog header="Kurs bearbeiten" [modal]="true" [(visible)]="editModalVisible" [style]="{ width: '30rem' }" [closable]="false">
  <div class="p-fluid">
    <div class="p-field !pb-3">
      <label for="editCourseID" class="!pr-5">Kurs ID</label>
      <input id="editCourseID" type="text" pInputText [(ngModel)]="editedCourse.courseID" />
    </div>
    <div class="p-field !pb-5">
      <label for="editName" class="!pr-5">Name</label>
      <input id="editName" type="text" pInputText [(ngModel)]="editedCourse.name" />
    </div>
  </div>
  <div class="flex justify-end gap-2 mt-4 ">
    <p-button label="Abbrechen" class="p-button-text" (click)="editModalVisible = false"></p-button>
    <p-button label="Kurs bearbeiten" severity="danger" (click)="updateCourse()"></p-button>
  </div>
</p-dialog>

<!-- DELETE COURSE MODAL -->
<p-dialog header="Kurs löschen" [modal]="true" [(visible)]="deleteModalVisible" [style]="{ width: '50rem' }" [closable]="false">
  <p>Wollen Sie wirklich den Kurs <b>{{ selectedCourse?.name }}</b> löschen?</p>
  <div class="flex justify-end gap-2 mt-4 !pt-3">
    <p-button label="Abbrechen" class="p-button-text" (click)="deleteModalVisible = false"></p-button>
    <p-button label="Kurs löschen" severity="danger" (click)="deleteCourse()"></p-button>
  </div>
</p-dialog>
